<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>基础 | O2&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/logo.ico">
    <meta name="description" content="随便写写">
    <meta name="keywords" content="随便写写">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.c1850c65.css" as="style"><link rel="preload" href="/assets/js/app.124efe63.js" as="script"><link rel="preload" href="/assets/js/2.f6f8ee30.js" as="script"><link rel="preload" href="/assets/js/23.9d7097f3.js" as="script"><link rel="prefetch" href="/assets/js/10.cf34be2f.js"><link rel="prefetch" href="/assets/js/11.d0c564e8.js"><link rel="prefetch" href="/assets/js/12.5702c746.js"><link rel="prefetch" href="/assets/js/13.ef1064ab.js"><link rel="prefetch" href="/assets/js/14.d4bbe0f4.js"><link rel="prefetch" href="/assets/js/15.187f2bbe.js"><link rel="prefetch" href="/assets/js/16.81ec7462.js"><link rel="prefetch" href="/assets/js/17.78492a55.js"><link rel="prefetch" href="/assets/js/18.f2257de3.js"><link rel="prefetch" href="/assets/js/19.89ad1690.js"><link rel="prefetch" href="/assets/js/20.17a31e9f.js"><link rel="prefetch" href="/assets/js/21.5f2d65e5.js"><link rel="prefetch" href="/assets/js/22.8245079c.js"><link rel="prefetch" href="/assets/js/24.98301950.js"><link rel="prefetch" href="/assets/js/25.d33c847e.js"><link rel="prefetch" href="/assets/js/26.9ac08ddd.js"><link rel="prefetch" href="/assets/js/27.dfdd9bfa.js"><link rel="prefetch" href="/assets/js/28.fdb03a82.js"><link rel="prefetch" href="/assets/js/29.fa740f14.js"><link rel="prefetch" href="/assets/js/3.24ac7792.js"><link rel="prefetch" href="/assets/js/30.69ec3d25.js"><link rel="prefetch" href="/assets/js/31.ebfbea07.js"><link rel="prefetch" href="/assets/js/32.0fbcae90.js"><link rel="prefetch" href="/assets/js/33.b19156eb.js"><link rel="prefetch" href="/assets/js/34.b59bceb5.js"><link rel="prefetch" href="/assets/js/35.e6df671c.js"><link rel="prefetch" href="/assets/js/36.3dcdb6f7.js"><link rel="prefetch" href="/assets/js/37.02f43a78.js"><link rel="prefetch" href="/assets/js/38.c7124ea4.js"><link rel="prefetch" href="/assets/js/39.34dae690.js"><link rel="prefetch" href="/assets/js/4.f1bc7974.js"><link rel="prefetch" href="/assets/js/40.2d1e38dc.js"><link rel="prefetch" href="/assets/js/41.6528ef5b.js"><link rel="prefetch" href="/assets/js/42.245ad245.js"><link rel="prefetch" href="/assets/js/43.12eda987.js"><link rel="prefetch" href="/assets/js/44.4a6daf4a.js"><link rel="prefetch" href="/assets/js/5.407395b9.js"><link rel="prefetch" href="/assets/js/6.78117502.js"><link rel="prefetch" href="/assets/js/7.56a055b6.js"><link rel="prefetch" href="/assets/js/8.0e58efd7.js"><link rel="prefetch" href="/assets/js/9.1baf3037.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c1850c65.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="O2's blog" class="logo"> <span class="site-name can-hide">O2's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="理论" class="dropdown-title"><a href="/theory/" class="link-title">理论</a> <span class="title" style="display:none;">理论</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实践" class="dropdown-title"><a href="/practice/" class="link-title">实践</a> <span class="title" style="display:none;">实践</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/baed3f/" class="nav-link">动手学深度学习</a></li><li class="dropdown-item"><!----> <a href="/pages/4b2e49/" class="nav-link">GitHub</a></li><li class="dropdown-item"><!----> <a href="/pages/9c32e1/" class="nav-link">Linux</a></li></ul></div></div><div class="nav-item"><a href="/hardware/" class="nav-link">硬件</a></div><div class="nav-item"><a href="/software/" class="nav-link">软件</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><a href="/other/" class="link-title">其它</a> <span class="title" style="display:none;">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/e22df7/" class="nav-link">论文</a></li><li class="dropdown-item"><!----> <a href="/pages/ffedf7/" class="nav-link">碎片</a></li></ul></div></div><div class="nav-item"><a href="/write/" class="nav-link">随笔</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <a href="https://github.com/YQisme/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/IronMan.png"> <div class="blogger-info"><h3>O2</h3> <span>地球人</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="理论" class="dropdown-title"><a href="/theory/" class="link-title">理论</a> <span class="title" style="display:none;">理论</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》</a></li><li class="dropdown-subitem"><a href="/note/js/" class="nav-link">《JavaScript高级程序设计》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/react/" class="nav-link">《React》</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li><li class="dropdown-subitem"><a href="/pages/51afd6/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/4643cd/" class="nav-link">JS设计模式总结</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实践" class="dropdown-title"><a href="/practice/" class="link-title">实践</a> <span class="title" style="display:none;">实践</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/baed3f/" class="nav-link">动手学深度学习</a></li><li class="dropdown-item"><!----> <a href="/pages/4b2e49/" class="nav-link">GitHub</a></li><li class="dropdown-item"><!----> <a href="/pages/9c32e1/" class="nav-link">Linux</a></li></ul></div></div><div class="nav-item"><a href="/hardware/" class="nav-link">硬件</a></div><div class="nav-item"><a href="/software/" class="nav-link">软件</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><a href="/other/" class="link-title">其它</a> <span class="title" style="display:none;">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/e22df7/" class="nav-link">论文</a></li><li class="dropdown-item"><!----> <a href="/pages/ffedf7/" class="nav-link">碎片</a></li></ul></div></div><div class="nav-item"><a href="/write/" class="nav-link">随笔</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <a href="https://github.com/YQisme/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>动手学深度学习</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/def99f/" class="sidebar-link">课程安排</a></li><li><a href="/pages/3245f5/" aria-current="page" class="active sidebar-link">基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/3245f5/#深度学习介绍" class="sidebar-link">深度学习介绍</a></li><li class="sidebar-sub-header"><a href="/pages/3245f5/#数据操作和预处理" class="sidebar-link">数据操作和预处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/3245f5/#数据操作" class="sidebar-link">数据操作</a></li><li class="sidebar-sub-header"><a href="/pages/3245f5/#预处理" class="sidebar-link">预处理</a></li></ul></li></ul></li><li><a href="/pages/4fa3d9/" class="sidebar-link">线性代数</a></li><li><a href="/pages/b0b256/" class="sidebar-link">blog_test</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Github</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-0c557b5e><div class="articleInfo" data-v-0c557b5e><ul class="breadcrumbs" data-v-0c557b5e><li data-v-0c557b5e><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-0c557b5e></a></li> <li data-v-0c557b5e><a href="/practice/#实践" data-v-0c557b5e>实践</a></li><li data-v-0c557b5e><a href="/practice/#动手学深度学习" data-v-0c557b5e>动手学深度学习</a></li></ul> <div class="info" data-v-0c557b5e><div title="作者" class="author iconfont icon-touxiang" data-v-0c557b5e><a href="https://github.com/YQisme" target="_blank" title="作者" class="beLink" data-v-0c557b5e>YangQi</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-0c557b5e><a href="javascript:;" data-v-0c557b5e>2022-01-21</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">基础<!----></h1>  <div class="theme-vdoing-content content__default"><h2 id="深度学习介绍"><a href="#深度学习介绍" class="header-anchor">#</a> 深度学习介绍</h2> <img src="https://myimgs.obs.cn-east-2.myhuaweicloud.com/Typora/image-20211210170444693.png" alt="image-20211210170444693" style="zoom:50%;"> <h2 id="数据操作和预处理"><a href="#数据操作和预处理" class="header-anchor">#</a> 数据操作和预处理</h2> <h3 id="数据操作"><a href="#数据操作" class="header-anchor">#</a> 数据操作</h3> <h4 id="n维数组"><a href="#n维数组" class="header-anchor">#</a> N维数组</h4> <p>N维数组是机器学习和神经网络的主要数据结构</p> <p><img src="https://myimgs.obs.cn-east-2.myhuaweicloud.com/Typora/image-20211211002455369.png" alt="image-20211211002455369" style="zoom:50%;"> <img src="https://yq-tuchuang.oss-cn-beijing.aliyuncs.com/image-20211211002507232.png" alt="image-20211211002507232" style="zoom:50%;"></p> <h4 id="创建数组"><a href="#创建数组" class="header-anchor">#</a> 创建数组</h4> <p>创建数组需要：</p> <ul><li>形状：例如3x4矩阵</li> <li>每个元素的数据类型：例如32位浮点数（Tensor中<font color="red">默认是64位</font>，而深度学习中<font color="red">常用32位</font>）</li> <li>每个元素的值，例如全是0，或者随机数</li></ul> <img src="https://myimgs.obs.cn-east-2.myhuaweicloud.com/Typora/image-20211211002715073.png" alt="image-20211211002715073" style="zoom:50%;"> <h4 id="访问元素"><a href="#访问元素" class="header-anchor">#</a> 访问元素</h4> <img src="https://myimgs.obs.cn-east-2.myhuaweicloud.com/Typora/image-20211211002822498.png" alt="image-20211211002822498" style="zoom:50%;"> <h4 id="张量"><a href="#张量" class="header-anchor">#</a> 张量</h4> <p>张量表示由一个数值组成的数组，这个数组可能有多个维度。 具有一个轴的张量对应数学上的<strong>向量</strong>（vector）； 具有两个轴的张量对应数学上的<strong>矩阵</strong>（matrix）； 具有两个轴以上的张量没有特殊的数学名称。</p> <blockquote><p>首先，可以使用<code>arange</code>创建一个行向量<code>x</code>。 这个行向量包含从0开始的前12个整数，它们被默认创建为浮点数。 张量中的每个值都称为张量的<em>元素</em>（element）。 例如，张量<code>x</code>中有12个元素。 除非额外指定，新的张量默认将存储在内存中，并采用基于CPU的计算。</p></blockquote> <ul><li><code>x = torch.arange(12)</code> <ul><li>tensor([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11])</li></ul></li></ul> <blockquote><p>访问张量（沿每个轴的长度）的形状</p></blockquote> <ul><li><code>x.shape</code> <ul><li>torch.size([12])</li></ul></li></ul> <blockquote><p>张量中元素的总数(标量)</p></blockquote> <ul><li><code>x.numel()</code> <ul><li>12</li></ul></li></ul> <blockquote><p><strong>要想改变一个张量的形状而不改变元素数量和元素值，可以调用<code>reshape</code>函数</strong>,通过改变张量的形状，张量的大小不会改变。</p></blockquote> <ul><li><p><code>X = x.reshape(3, 4)</code></p> <ul><li><div class="language-python line-numbers-mode"><pre class="language-python"><code>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span>  <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token number">2</span><span class="token punctuation">,</span>  <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span> <span class="token number">4</span><span class="token punctuation">,</span>  <span class="token number">5</span><span class="token punctuation">,</span>  <span class="token number">6</span><span class="token punctuation">,</span>  <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span> <span class="token number">8</span><span class="token punctuation">,</span>  <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>可以通过<code>-1</code>来调用此自动计算出维度的功能。 即可以用<code>x.reshape(-1,4)</code>或<code>x.reshape(3,-1)</code>来取代<code>x.reshape(3,4)</code></p></li></ul></li></ul> <blockquote><p><strong>使用全0、全1、其他常量，或者从特定分布中随机采样的数字</strong>来初始化矩阵</p></blockquote> <ul><li><p><code>torch.zeros((2, 3, 4))</code></p> <ul><li><div class="language-python line-numbers-mode"><pre class="language-python"><code>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
         <span class="token punctuation">[</span><span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
         <span class="token punctuation">[</span><span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

        <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
         <span class="token punctuation">[</span><span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
         <span class="token punctuation">[</span><span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul></li> <li><p><code>torch.ones((2, 3, 4))</code></p> <ul><li><div class="language-python line-numbers-mode"><pre class="language-python"><code>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
         <span class="token punctuation">[</span><span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
         <span class="token punctuation">[</span><span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

        <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
         <span class="token punctuation">[</span><span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
         <span class="token punctuation">[</span><span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul></li> <li><p>通过从某个特定的概率分布中随机采样来得到张量中每个元素的值。</p> <ul><li><p>例如，当构造数组来作为<font color="red">神经网络中的参数</font>时，通常会<font color="red">随机初始化参数</font>的值。</p></li> <li><p>以下代码创建一个形状为（3,4）的张量。 其中的每个元素都从均值为0、标准差为1的标准高斯分布（正态分布）中随机采样。</p></li> <li><p><code>torch.randn(3, 4)</code></p> <ul><li><div class="language-python line-numbers-mode"><pre class="language-python"><code>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token number">0.1364</span><span class="token punctuation">,</span>  <span class="token number">0.3546</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.9091</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1.8926</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span> <span class="token number">0.5786</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.9019</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.1305</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.1899</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span> <span class="token number">0.5696</span><span class="token punctuation">,</span>  <span class="token number">1.1626</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.5987</span><span class="token punctuation">,</span>  <span class="token number">0.4085</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li></ul></li></ul> <blockquote><p><strong>通过提供包含数值的Python列表（或嵌套列表），来为所需张量中的每个元素赋予确定值</strong></p></blockquote> <ul><li><p><code>torch.tensor([[2, 1, 4, 3], [1, 2, 3, 4], [4, 3, 2, 1]])</code></p> <ul><li><div class="language-python line-numbers-mode"><pre class="language-python"><code>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>最外层的列表对应于轴0，内层的列表对应于轴1</p></li></ul></li></ul> <h4 id="运算符"><a href="#运算符" class="header-anchor">#</a> 运算符</h4> <p><strong>按元素</strong>（elementwise）运算。将标准标量运算符应用于数组的每个元素</p> <p>对于任意具有相同形状的张量， <strong>常见的标准算术运算符（<code>+</code>、<code>-</code>、<code>*</code>、<code>/</code>和<code>**</code>）都可以被升级为按元素运算</strong></p> <ul><li><div class="language-python line-numbers-mode"><pre class="language-python"><code>x <span class="token operator">=</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
y <span class="token operator">=</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
x <span class="token operator">+</span> y<span class="token punctuation">,</span> x <span class="token operator">-</span> y<span class="token punctuation">,</span> x <span class="token operator">*</span> y<span class="token punctuation">,</span> x <span class="token operator">/</span> y<span class="token punctuation">,</span> x <span class="token operator">**</span> y  <span class="token comment"># **运算符是求幂运算</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><div class="language- line-numbers-mode"><pre class="language-text"><code>(tensor([ 3.,  4.,  6., 10.]),
 tensor([-1.,  0.,  2.,  6.]),
 tensor([ 2.,  4.,  8., 16.]),
 tensor([0.5000, 1.0000, 2.0000, 4.0000]),
 tensor([ 1.,  4., 16., 64.]))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul></li> <li><p><code>torch.exp(x)</code></p> <ul><li><div class="language- line-numbers-mode"><pre class="language-text"><code>tensor([2.7183e+00, 7.3891e+00, 5.4598e+01, 2.9810e+03])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <hr></li></ul> <blockquote><p><strong>把多个张量<em>连结</em>（concatenate）在一起</strong>， 把它们端对端地叠起来形成一个更大的张量。</p></blockquote> <p>只需要提供张量列表，并给出沿哪个轴连结</p> <ul><li><p>沿行（轴-0，形状的第一个元素） 和按列（轴-1，形状的第二个元素）连结两个矩阵</p> <ul><li><div class="language-python line-numbers-mode"><pre class="language-python"><code>X <span class="token operator">=</span> torch<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>torch<span class="token punctuation">.</span>float32<span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
Y <span class="token operator">=</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span><span class="token punctuation">(</span>X<span class="token punctuation">,</span> Y<span class="token punctuation">)</span><span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span><span class="token punctuation">(</span>X<span class="token punctuation">,</span> Y<span class="token punctuation">)</span><span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><div class="language- line-numbers-mode"><pre class="language-text"><code>(tensor([[ 0.,  1.,  2.,  3.],
         [ 4.,  5.,  6.,  7.],
         [ 8.,  9., 10., 11.],
         [ 2.,  1.,  4.,  3.],
         [ 1.,  2.,  3.,  4.],
         [ 4.,  3.,  2.,  1.]]),
 tensor([[ 0.,  1.,  2.,  3.,  2.,  1.,  4.,  3.],
         [ 4.,  5.,  6.,  7.,  1.,  2.,  3.,  4.],
         [ 8.,  9., 10., 11.,  4.,  3.,  2.,  1.]]))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ul></li></ul></li></ul> <hr> <blockquote><p>通过逻辑运算符构建二元张量</p></blockquote> <ul><li><p>如果<code>X</code>和<code>Y</code>在该位置相等，则新张量中相应项的值为1</p></li> <li><p><code>X == Y</code></p> <ul><li><div class="language- line-numbers-mode"><pre class="language-text"><code>tensor([[False,  True, False,  True],
        [False, False, False, False],
        [False, False, False, False]])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li></ul> <hr> <blockquote><p><strong>对张量中的所有元素进行求和，会产生一个单元素张量</strong></p></blockquote> <ul><li><p><code>X.sum()</code></p> <ul><li><div class="language- line-numbers-mode"><pre class="language-text"><code>tensor(66.)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul> <hr> <h4 id="广播机制"><a href="#广播机制" class="header-anchor">#</a> 广播机制</h4> <p><strong>形状不同</strong>，仍然可以通过调用 广播机制（broadcasting mechanism）来执行按元素操作</p> <ul><li><p>首先，通过适当复制元素来<strong>扩展</strong>一个或两个数组， 以便在转换之后，两个张量具有相同的形状。</p> <ul><li>其次，对生成的数组执行按元素操作。</li></ul></li> <li><div class="language-python line-numbers-mode"><pre class="language-python"><code>a <span class="token operator">=</span> torch<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
b <span class="token operator">=</span> torch<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
a<span class="token punctuation">,</span> b
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>(tensor([[0],
         [1],
         [2]]),
 tensor([[0, 1]]))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <p>矩阵<code>a</code>复制列， 矩阵<code>b</code>复制行</p> <ul><li><p><code>a + b</code></p> <ul><li><div class="language- line-numbers-mode"><pre class="language-text"><code>tensor([[0, 1],
        [1, 2],
        [2, 3]])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li></ul> <hr> <h4 id="索引和切片"><a href="#索引和切片" class="header-anchor">#</a> 索引和切片</h4> <blockquote><p>用<code>[-1]</code>选择最后一个元素，用<code>[1:3]</code>选择第二个和第三个元素</p> <p>在二维中就是行元素</p></blockquote> <ul><li><p><code>X[-1], X[1:3]</code></p> <ul><li><div class="language- line-numbers-mode"><pre class="language-text"><code>(tensor([ 8.,  9., 10., 11.]),
 tensor([[ 4.,  5.,  6.,  7.],
         [ 8.,  9., 10., 11.]]))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li></ul> <blockquote><p><strong>通过指定索引来将元素写入矩阵</strong></p></blockquote> <ul><li><div class="language-python line-numbers-mode"><pre class="language-python"><code>X<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">9</span>
X
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><div class="language- line-numbers-mode"><pre class="language-text"><code>tensor([[ 0.,  1.,  2.,  3.],
        [ 4.,  5.,  9.,  7.],
        [ 8.,  9., 10., 11.]])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li></ul> <blockquote><p><strong>为多个元素赋值相同的值</strong></p></blockquote> <ul><li><div class="language-python line-numbers-mode"><pre class="language-python"><code>X<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">12</span>
X
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>tensor([[12., 12., 12., 12.],
        [12., 12., 12., 12.],
        [ 8.,  9., 10., 11.]])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <h4 id="节省内存"><a href="#节省内存" class="header-anchor">#</a> 节省内存</h4> <p><strong>运行一些操作可能会导致为新结果分配内存</strong>。 例如，如果用<code>Y = X + Y</code>，将取消引用<code>Y</code>指向的张量，而是指向新分配的内存处的张量。</p> <p>在下面的例子中，使用Python的<code>id()</code>函数演示， <code>id()</code>函数提供了内存中引用对象的确切地址。</p> <p>运行<code>Y = Y + X</code>后，发现<code>id(Y)</code>指向另一个位置。 这是因为Python首先计算<code>Y + X</code>，为结果分配新的内存，然后使<code>Y</code>指向内存中的这个新位置。</p> <ul><li><div class="language-python line-numbers-mode"><pre class="language-python"><code>before <span class="token operator">=</span> <span class="token builtin">id</span><span class="token punctuation">(</span>Y<span class="token punctuation">)</span>
Y <span class="token operator">=</span> Y <span class="token operator">+</span> X
<span class="token builtin">id</span><span class="token punctuation">(</span>Y<span class="token punctuation">)</span> <span class="token operator">==</span> before
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>False
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p>这可能是不可取的，原因有两个：</p> <ul><li>首先，不想总是不必要地分配内存。 在机器学习中，我们可能有数百兆的参数，并且在一秒内多次更新所有参数。 通常情况下，希望原地执行这些更新。</li> <li>其次，如果不原地更新，其他引用仍然会指向旧的内存位置， 这样某些代码可能会无意中引用旧的参数。</li></ul> <blockquote><p>所以需要**<font color="red">执行原地操作</font>**。</p></blockquote> <p>可以使用切片表示法将操作的结果分配给先前分配的数组，例如<code>Y[:] = &lt;expression&gt;</code>。</p> <ul><li><p>创建一个新的矩阵<code>Z</code>，其形状与另一个<code>Y</code>相同， 使用<code>zeros_like</code>来分配一个全00的块。</p> <ul><li><div class="language-python line-numbers-mode"><pre class="language-python"><code>Z <span class="token operator">=</span> torch<span class="token punctuation">.</span>zeros_like<span class="token punctuation">(</span>Y<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'id(Z):'</span><span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">(</span>Z<span class="token punctuation">)</span><span class="token punctuation">)</span>
Z<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> X <span class="token operator">+</span> Y
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'id(Z):'</span><span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">(</span>Z<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>id(Z): 2016710171280
id(Z): 2016710171280
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul></li> <li><p>如果在后续计算中没有重复使用<code>X</code>， 我们也可以<font color="red">使用<code>X[:] = X + Y</code>或<code>X += Y</code>来减少操作的内存开销</font></p> <ul><li><div class="language-python line-numbers-mode"><pre class="language-python"><code>before <span class="token operator">=</span> <span class="token builtin">id</span><span class="token punctuation">(</span>X<span class="token punctuation">)</span>
X <span class="token operator">+=</span> Y
<span class="token builtin">id</span><span class="token punctuation">(</span>X<span class="token punctuation">)</span> <span class="token operator">==</span> before
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>True
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul> <hr> <h4 id="转换为其他python对象"><a href="#转换为其他python对象" class="header-anchor">#</a> 转换为其他Python对象</h4> <p>将深度学习框架定义的张量<strong>转换为NumPy张量（<code>ndarray</code>）<strong>很容易，反之也同样容易。 torch张量和numpy数组将</strong>共享它们的底层内存</strong>，就地操作更改一个张量也会同时更改另一个张量。</p> <ul><li><div class="language-python line-numbers-mode"><pre class="language-python"><code>A <span class="token operator">=</span> X<span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span>
B <span class="token operator">=</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span>A<span class="token punctuation">)</span>
<span class="token builtin">type</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token punctuation">(</span>B<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><div class="language- line-numbers-mode"><pre class="language-text"><code>(numpy.ndarray, torch.Tensor)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul> <hr> <blockquote><p>要(<strong>将大小为1的张量转换为Python标量</strong>)，可以调用<code>item</code>函数或Python的内置函数</p></blockquote> <div class="language-python line-numbers-mode"><pre class="language-python"><code>a <span class="token operator">=</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3.5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
a<span class="token punctuation">,</span> a<span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>(tensor([3.5000]), 3.5, 3.5, 3)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="预处理"><a href="#预处理" class="header-anchor">#</a> 预处理</h3> <h4 id="读取数据集"><a href="#读取数据集" class="header-anchor">#</a> 读取数据集</h4> <blockquote><p><strong>创建一个人工数据集，并存储在CSV（逗号分隔值）文件</strong></p></blockquote> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> os

os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">,</span> <span class="token string">'data'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> exist_ok<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
data_file <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">,</span> <span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token string">'house_tiny.csv'</span><span class="token punctuation">)</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>data_file<span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'NumRooms,Alley,Price\n'</span><span class="token punctuation">)</span>  <span class="token comment"># 列名</span>
    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'NA,Pave,127500\n'</span><span class="token punctuation">)</span>  <span class="token comment"># 每行表示一个数据样本</span>
    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'2,NA,106000\n'</span><span class="token punctuation">)</span>
    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'4,NA,178100\n'</span><span class="token punctuation">)</span>
    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'NA,NA,140000\n'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img src="https://myimgs.obs.cn-east-2.myhuaweicloud.com/Typora/image-20211211124949713.png" alt="image-20211211124949713" loading="lazy"></p> <ul><li><code>print(data_file)</code></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>'.\\data\\house_tiny.csv'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>os.makedirs(name, mode=0o777, exist_ok=False)</code>:用来创建<strong>多层目录</strong>（单层请用os.mkdir)
<ul><li>name：想创建的目录名</li> <li>mode：要为目录设置的权限数字模式，默认的模式为 0o777 (八进制)。</li> <li>exist_ok：是否在目录存在时触发异常。如果exist_ok为False（默认值），则在目标目录已存在的情况下触发FileExistsError异常；如果<font color="red">exist_ok为True</font>，则在目标目录已存在的情况下<strong>不会触发FileExistsError异常</strong>。</li></ul></li> <li><code>os.path.join()</code>函数：连接两个或更多的路径名组件
<ul><li>1.如果各组件名首字母不包含’/’，则函数会自动加上</li> <li>2.如果有一个组件是一个绝对路径，则在它之前的所有组件均会被舍弃</li> <li>3.如果最后一个组件为空，则生成的路径以一个’/’分隔符结尾</li></ul></li></ul> <blockquote><p><strong>从创建的CSV文件中加载原始数据集</strong></p></blockquote> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

data <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span>data_file<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="https://myimgs.obs.cn-east-2.myhuaweicloud.com/Typora/image-20211211125038054.png" alt="image-20211211125038054" loading="lazy"></p> <hr> <h5 id="补充-python-标准库-os"><a href="#补充-python-标准库-os" class="header-anchor">#</a> 补充：python 标准库：os</h5> <p><a href="https://zhuanlan.zhihu.com/p/82029511" target="_blank" rel="noopener noreferrer">python 标准库：os - 知乎 (zhihu.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p>os 顾名思义，就是与操作系统相关的标准库。如：文件，目录，执行系统命令等。</p></blockquote> <h6 id="_1-导入模块"><a href="#_1-导入模块" class="header-anchor">#</a> <strong>1.导入模块</strong></h6> <p>os 是 python 标准库模块，随 python 一起安装，无需单独安装，可直接导入。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> os
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h6 id="_2-path-子模块"><a href="#_2-path-子模块" class="header-anchor">#</a> 2.<strong>path 子模块</strong></h6> <p>涉及与磁盘文件操作，最常使用的当属 <code>path</code> 模块了。<code>path</code> 是 <code>os</code> 的子模块，可以通过 <code>from os import path</code> 使用，也可以直接通过 <code>os.path</code> 属性的方式使用。本文，为了保持一致性，统一采用后者的书写形式。</p> <p><strong>2.1 exists(path)</strong></p> <p>检测文件或目录是否存在。存在返回 <code>True</code> , 不存在返回 <code>False</code> 。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token string">&quot;dog.jpeg&quot;</span><span class="token punctuation">)</span>
<span class="token boolean">True</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>2.2 isfile(path)</strong></p> <p>判断是否为文件。是返回 <code>True</code>， 不是返回 <code>False</code>。也可以用来判断文件是否存在。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isfile<span class="token punctuation">(</span><span class="token string">&quot;dogs/&quot;</span><span class="token punctuation">)</span>
<span class="token boolean">False</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>2.3 isdir(path)</strong></p> <p>判断是否为目录。是返回 <code>True</code>， 不是返回 <code>False</code>。也可以用来判断目录是否存在。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span><span class="token string">&quot;dogs/&quot;</span><span class="token punctuation">)</span>
<span class="token boolean">True</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>2.4 basename(path)</strong></p> <p>返回path最后的文件名。如果path以／或\结尾，那么就会返回空值（含扩展）。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>basename<span class="token punctuation">(</span><span class="token string">&quot;dir1/dir2/file.ext&quot;</span><span class="token punctuation">)</span>
<span class="token string">'file.ext'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>2.5 dirname(path)</strong></p> <p>返回文件所在目录。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span><span class="token string">&quot;dir1/dir2/file.ext&quot;</span><span class="token punctuation">)</span>
<span class="token string">'dir1/dir2'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>2.6 split(path)</strong></p> <p>返回一个元组。元组第一个元素为文件所在目录，第二个元素为文件名（含扩展）。等效于 <code>(dirname(path), basename(path))</code>。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot;dir1/dir2/file.ext&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token string">'dir1/dir2'</span><span class="token punctuation">,</span> <span class="token string">'file.ext'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>2.7 splitext(path)</strong></p> <p>返回一个元组。元组第一个元素为文件所在目录和文件名（不含扩展），第二个元素为扩展名（包含 <code>.</code>）。常用来读取或更改文件扩展名。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>splitext<span class="token punctuation">(</span><span class="token string">&quot;dir1/dir2/file.ext&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token string">'dir1/dir2/file'</span><span class="token punctuation">,</span> <span class="token string">'.ext'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>*<em>2.8 join(path, <em>paths)</em></em></p> <p>将路径不同部分拼接成一个完整的路径。等效于 <code>os.sep.join([path, *paths])</code> 。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string">&quot;dir1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dir2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;file.ext&quot;</span><span class="token punctuation">)</span>
<span class="token string">'dir1/dir2/file.ext'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>2.9 getsize(path)</strong></p> <p>返回文件大小。单位字节。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>getsize<span class="token punctuation">(</span><span class="token string">&quot;dog.jpeg&quot;</span><span class="token punctuation">)</span>
<span class="token number">18335</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h6 id="_3-目录操作"><a href="#_3-目录操作" class="header-anchor">#</a> 3.目录操作</h6> <p><strong>3.1 listdir(path='.')</strong></p> <p>返回一个列表。列表为给定目录下所有文件和子目录，但不包含特殊目录 <code>.</code> 和 <code>..</code>。默认为当前目录。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span><span class="token string">&quot;dogs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token string">'122.Pointer'</span><span class="token punctuation">,</span>
 <span class="token string">'069.French_bulldog'</span><span class="token punctuation">,</span>
 <span class="token string">'124.Poodle'</span><span class="token punctuation">,</span>
 <span class="token string">'112.Nova_scotia_duck_tolling_retriever'</span><span class="token punctuation">,</span>
 <span class="token string">'043.Canaan_dog'</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>3.2 mkdir(path, mode=0o777)</strong></p> <p>创建名为 <code>path</code> 的目录。并以数字形式指定目录权限，默认权限为 777 。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span><span class="token string">&quot;newdir&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>3.3 makedirs(path, mode=0o777)</strong></p> <p>递归方式创建路径为 <code>path</code> 的目录。并以数字形式指定目录权限，默认权限为 777 。可以看作功能更强大的 <code>mkdir</code>，它会自动创建叶子节点目录的所有上级目录，而 <code>mkdir</code> 必须在上级目录已经存在情况下，才能创建叶子节点的目录。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span><span class="token string">&quot;parent/child/newdir&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>3.4 rmdir(path)</strong></p> <p>删除目录。<strong>目录必须存在，并且只能删除空目录</strong>。不存在或不为空，都会异常。要想递归删除整个目录树，请使用 <a href="https://link.zhihu.com/?target=https%3A//docs.python.org/zh-cn/3/library/shutil.html%23shutil.rmtree" target="_blank" rel="noopener noreferrer">shutil.rmtree()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>os<span class="token punctuation">.</span>rmdir<span class="token punctuation">(</span><span class="token string">&quot;newdir&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>3.5 removedirs(path)</strong></p> <p>递归删除目录。<strong>目录必须存在，并且只能删除空目录</strong>。不存在或不为空，都会异常。与 <code>rmdir</code> 不同的是，在删除了叶子节点目录后，会逐次删除上级目录，直到遇到不为空的目录。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>os<span class="token punctuation">.</span>removedirs<span class="token punctuation">(</span><span class="token string">&quot;parent/child/newdir&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>3.6 remove(path)</strong></p> <p>删除文件。不能删除目录，给定路径必须为文件，否则会异常。</p> <p><em>Warm Suggestion</em>: 以下复制文件的操作，推荐使用 <a href="https://link.zhihu.com/?target=https%3A//docs.python.org/zh-cn/3/library/shutil.html%3Fhighlight%3Dshutil%23module-shutil" target="_blank" rel="noopener noreferrer">shutil.copyfile<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 复制文件</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;dog.jpeg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rb&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    content <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;dog.copy.jpeg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;wb&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f2<span class="token punctuation">:</span>
        f2<span class="token punctuation">.</span>write<span class="token punctuation">(</span>content<span class="token punctuation">)</span>

<span class="token comment"># 删除文件</span>
os<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token string">&quot;dog.copy.jpeg&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h6 id="_4-其他-os-接口"><a href="#_4-其他-os-接口" class="header-anchor">#</a> <strong>4. 其他 os 接口</strong></h6> <p><strong>4.1 getenv(key, default=None)</strong></p> <p>获取环境变量。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">&quot;PATH&quot;</span><span class="token punctuation">)</span>
<span class="token string">'/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>4.2 get_exec_path(env=None)</strong></p> <p>返回用于搜索可执行文件的目录列表。看以看作是 <code>PATH</code> 环境变量的列表形式。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>os<span class="token punctuation">.</span>get_exec_path<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'/usr/local/bin'</span><span class="token punctuation">,</span>
 <span class="token string">'/usr/bin'</span><span class="token punctuation">,</span>
 <span class="token string">'/bin'</span><span class="token punctuation">,</span>
 <span class="token string">'/usr/sbin'</span><span class="token punctuation">,</span>
 <span class="token string">'/sbin'</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>4.3 system(command)</strong></p> <p>在当前进程中，启动子进程，执行命令 command（字符串），主进程会阻塞，直到子进程执行完成。这是通过调用标准C函数 <code>system()</code> 来实现的，并且具有相同的限制。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">if</span> os<span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">&quot;nt&quot;</span><span class="token punctuation">:</span>
    command <span class="token operator">=</span> <span class="token string">&quot;dir&quot;</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    command <span class="token operator">=</span> <span class="token string">&quot;ls -l&quot;</span>

os<span class="token punctuation">.</span>system<span class="token punctuation">(</span>command<span class="token punctuation">)</span>
<span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><hr> <h5 id="补充-python-使用-with-open-as-读写文件"><a href="#补充-python-使用-with-open-as-读写文件" class="header-anchor">#</a> 补充：python 使用 with open（） as 读写文件</h5> <p><a href="https://blog.csdn.net/xrinosvip/article/details/82019844" target="_blank" rel="noopener noreferrer">python 使用 with open（） as 读写文件_xrinosvip的博客-CSDN博客_python withopen<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h6 id="读文件"><a href="#读文件" class="header-anchor">#</a> <strong>读文件</strong></h6> <p>要以读文件的模式打开一个文件对象，使用Python内置的<code>open()</code>函数，传入文件名和标示符：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'E:\python\python\test.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>标示符'r'表示读，这样，我们就成功地打开了一个文件。</p> <p>如果文件不存在，<code>open()</code>函数就会抛出一个<code>IOError</code>的错误，并且给出错误码和详细的信息告诉你文件不存在：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>f<span class="token operator">=</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'E:\python\python\notfound.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span>

Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">&quot;&lt;stdin&gt;&quot;</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
FileNotFoundError<span class="token punctuation">:</span> <span class="token punctuation">[</span>Errno <span class="token number">2</span><span class="token punctuation">]</span> No such <span class="token builtin">file</span> <span class="token keyword">or</span> directory<span class="token punctuation">:</span> <span class="token string">'E:\python\python\notfound.txt'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>如果文件打开成功，接下来，调用<code>read()</code>方法可以一次读取文件的全部内容，Python把内容读到内存，<strong>用一个<code>str</code>对象表示</strong>：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token string">'Hello, python!'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>最后一步是调用<code>close()</code>方法关闭文件。文件使用完毕后<font color="red">必须关闭</font>，因为文件对象会占用操作系统的资源，并且操作系统同一时间能打开的文件数量也是有限的：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>由于文件读写时都有可能产生<code>IOError</code>，一旦出错，后面的<code>f.close()</code>就不会调用。所以，<strong>为了保证无论是否出错都能正确地关闭文件，我们可以使用<code>try ... finally</code>来实现：</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">try</span><span class="token punctuation">:</span>
    f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'/path/'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">finally</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> f<span class="token punctuation">:</span>
        f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>每次都这么写实在太繁琐，所以，Python<strong>引入了<code>with</code>语句来自动帮我们调用<code>close()</code>方法：</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'/path/to/file'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这和前面的<code>try ... finally</code>是一样的，但是代码更佳简洁，并且不必调用<code>f.close()</code>方法。</p> <p>调用<code>read()</code>会一次性读取文件的全部内容，如果文件有20G，内存就爆了，所以，要<font color="red">保险起见，可以反复调用<code>read(size)</code>方法</font>，每次最多读取size个字节的内容。另外，调用<code>readline()</code>可以每次<font color="red">读取一行内容</font>，调用<code>readlines()</code>一次读取所有内容并按行返回<code>list</code>。因此，要根据需要决定怎么调用。</p> <ul><li>如果文件很小，<code>read()</code>一次性读取最方便；</li> <li>如果不能确定文件大小，反复调用<code>read(size)</code>比较保险；</li> <li>如果是配置文件，调用<code>readlines()</code>最方便：</li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">for</span> line <span class="token keyword">in</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 把末尾的'\n'删掉</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><hr> <h6 id="写文件"><a href="#写文件" class="header-anchor">#</a> <strong>写文件</strong></h6> <p>写文件和读文件是一样的，唯一区别是调用<code>open()</code>函数时，传入标识符<code>'w'</code>或者<code>'wb'</code>表示写文本文件或写二进制文件：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'E:\python\python\test.txt'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'Hello, python!'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>可以反复调用<code>write()</code>来写入文件，但是务必要调用<code>f.close()</code>来关闭文件。当我们<strong>写文件时，操作系统往往不会立刻把数据写入磁盘，而是放到内存缓存起来，空闲的时候再慢慢写入</strong>。只有调用<code>close()</code>方法时，操作系统才保证把没有写入的数据全部写入磁盘。忘记调用<code>close()</code>的后果是数据可能只写了一部分到磁盘，剩下的丢失了。所以，<font color="red">还是用<code>with</code>语句来得保险</font>：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'E:\python\python\test.txt'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'Hello, python!'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>要写入特定编码的文本文件，请给<code>open()</code>函数传入<code>encoding</code>参数，将字符串自动转换成指定编码</p> <h6 id="字符编码"><a href="#字符编码" class="header-anchor">#</a> <strong>字符编码</strong></h6> <p>要读取非UTF-8编码的文本文件，需要给<code>open()</code>函数传入<code>encoding</code>参数，例如，读取GBK编码的文件：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'E:\python\python\gbk.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'gbk'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'测试'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>遇到有些编码不规范的文件，你可能会遇到<code>UnicodeDecodeError</code>，因为在文本文件中可能夹杂了一些非法编码的字符。遇到这种情况，<code>open()</code>函数还接收一个<code>errors</code>参数，表示如果遇到编码错误后如何处理。最简单的方式是直接忽略：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'E:\python\python\gbk.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'gbk'</span><span class="token punctuation">,</span> errors<span class="token operator">=</span><span class="token string">'ignore'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h6 id="二进制文件"><a href="#二进制文件" class="header-anchor">#</a> <strong>二进制文件</strong></h6> <p>前面讲的默认都是读取文本文件，并且是UTF-8编码的文本文件。要读取二进制文件，比如图片、视频等等，用<code>'rb'</code>模式打开文件即可：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'E:\python\python\test.jpg'</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">b'\xff\xd8\xff\xe1\x00\x18Exif\x00\x00...'</span> <span class="token comment"># 十六进制表示的字节</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><font color="red">总结：以后读写文件尽量使用with open语句，少使用f = open()语句</font></p> <p><strong>对于多个文件的读写，可以写成以下两种方式：</strong></p> <p><strong>1、</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'C:\Desktop\text.txt'</span><span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'C:\Desktop\text1.txt'</span><span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f1<span class="token punctuation">:</span>
        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'C:\Desktop\text2.txt'</span><span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f2　　　　　　
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>　　　　　　　
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>　　　　　　　
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>2、</strong></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">''</span>C<span class="token punctuation">:</span>\Desktop\text<span class="token punctuation">.</span>txt<span class="token string">','</span>r'<span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">''</span>C<span class="token punctuation">:</span>\Desktop\text1<span class="token punctuation">.</span>txt<span class="token string">','</span>r'<span class="token punctuation">)</span> <span class="token keyword">as</span> f1<span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'C:\Desktop\text2.txt'</span><span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f2<span class="token punctuation">:</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h6 id="文件的读写方式列表"><a href="#文件的读写方式列表" class="header-anchor">#</a> <strong>文件的读写方式列表</strong></h6> <img src="https://myimgs.obs.cn-east-2.myhuaweicloud.com/Typora/70.png" alt="img" style="zoom:67%;"> <h6 id="file-对象属性"><a href="#file-对象属性" class="header-anchor">#</a> <strong>File 对象属性</strong></h6> <p><img src="https://myimgs.obs.cn-east-2.myhuaweicloud.com/Typora/70-16438555591841.png" alt="img" loading="lazy"></p> <hr> <h4 id="处理缺失值"><a href="#处理缺失值" class="header-anchor">#</a> <strong>处理缺失值</strong></h4> <p>“NaN”项代表缺失值。为了处理缺失的数据，典型的方法包括<strong>插值法和删除法</strong>， 其中插值法用一个替代值弥补缺失值，而删除法则直接忽略缺失值.</p> <ul><li><p>通过位置索引<code>iloc</code>，将<code>data</code>分成<code>inputs</code>和<code>outputs</code>， 其中前者为<code>data</code>的前两列，而后者为<code>data</code>的最后一列。 对于<code>inputs</code>中缺少的数值，用同一列的均值替换“NaN”项。</p> <ul><li><div class="language-python line-numbers-mode"><pre class="language-python"><code>inputs<span class="token punctuation">,</span> outputs <span class="token operator">=</span> data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
inputs <span class="token operator">=</span> inputs<span class="token punctuation">.</span>fillna<span class="token punctuation">(</span>inputs<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>inputs<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><img src="https://myimgs.obs.cn-east-2.myhuaweicloud.com/Typora/image-20211211125651375.png" alt="image-20211211125651375" loading="lazy"></li> <li>数值中的NA用均值替换，字符串中的不行</li></ul></li></ul></li> <li><p><strong>对于<code>inputs</code>中的类别值或离散值，我们将“NaN”视为一个类别。</strong> 由于“巷子类型”（“Alley”）列只接受两种类型的类别值“Pave”和“NaN”， <code>pandas</code>可以自动将此列转换为两列“Alley_Pave”和“Alley_nan”。 巷子类型为“Pave”的行会将“Alley_Pave”的值设置为1，“Alley_nan”的值设置为0。 缺少巷子类型的行会将“Alley_Pave”和“Alley_nan”分别设置为0和1。</p> <ul><li><div class="language-python line-numbers-mode"><pre class="language-python"><code>inputs <span class="token operator">=</span> pd<span class="token punctuation">.</span>get_dummies<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> dummy_na<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>inputs<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><img src="https://myimgs.obs.cn-east-2.myhuaweicloud.com/Typora/image-20211211125850177.png" alt="image-20211211125850177" loading="lazy"></li></ul></li></ul></li></ul> <hr> <h4 id="转换为张量格式"><a href="#转换为张量格式" class="header-anchor">#</a> <strong>转换为张量格式</strong></h4> <p>现在<code>inputs</code>和<code>outputs</code>中的所有条目都是数值类型，它们可以转换为张量格式</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> torch

X<span class="token punctuation">,</span> y <span class="token operator">=</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span>inputs<span class="token punctuation">.</span>values<span class="token punctuation">)</span><span class="token punctuation">,</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span>outputs<span class="token punctuation">.</span>values<span class="token punctuation">)</span>
X<span class="token punctuation">,</span> y
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="https://myimgs.obs.cn-east-2.myhuaweicloud.com/Typora/image-20211211130047128.png" alt="image-20211211130047128" loading="lazy"></p></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/YQisme/blog/edit/master/docs/02.实践/01.动手学深度学习/02.基础.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/02/11, 02:24:43</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/def99f/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">课程安排</div></a> <a href="/pages/4fa3d9/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">线性代数</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/def99f/" class="prev">课程安排</a></span> <span class="next"><a href="/pages/4fa3d9/">线性代数</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/6ca4c7/"><div>
            222
            <!----></div></a> <span class="date">02-28</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/c03dcc/"><div>
            CV论文期刊介绍
            <!----></div></a> <span class="date">02-27</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/aa7af1/"><div>
            Everything
            <!----></div></a> <span class="date">02-12</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:yangqi7isme@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/YQisme" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="/img/wechat.jpg" title="微信" target="_blank" class="iconfont icon-weixin"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2022
    <span>YangQi | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div><div></div></div></div>
    <script src="/assets/js/app.124efe63.js" defer></script><script src="/assets/js/2.f6f8ee30.js" defer></script><script src="/assets/js/23.9d7097f3.js" defer></script>
  </body>
</html>
